!function(){"use strict";angular.module("gulpAngularMqttWs",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ngMaterial"])}(),function(){"use strict";function t(){function t(t){var n=this;n.relativeDate=t(n.creationDate).fromNow()}var n={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["moment"],n}angular.module("gulpAngularMqttWs").directive("acmeNavbar",t)}(),angular.module("gulpAngularMqttWs").provider("mqttwsProvider",function(){this.$get=["$q","$window",function(t,n){return function(e){var o,r,i,a=!1,s=null,u=null,c=!0,l=2e3,d={},m={on:function(t,n){d[t]=n},addListener:function(){},subscribe:function(n,e){return e=e||{qos:0},function(){var o=t.defer(),r=function(){o.resolve(i)};return e.onSuccess=r,i.subscribe(n,e),o.promise}},connect:function(){var e=t.defer(),o=function(){var t=d.connected||function(){};t.call(null,arguments),e.resolve(arguments)},r=function(t){n.setTimeout(m.connect,l)},p={timeout:3,useSSL:a,cleanSession:c,onSuccess:o,onFailure:r};return null!==s&&(p.userName=s,p.password=u),i.connect(p),i.onMessageArrived=function(t){var n=t.destinationName,e=t.payloadString,o=d.message||function(){};o.apply(null,[n,e,t]);var r=d[n.toString()]||function(){};r.apply(null,[e,t])},e.promise}};return e=e||{},o=e.host,r=e.port,i=new Paho.MQTT.Client(o,r,"web_"+parseInt(100*Math.random(),10)),m}}]}),function(){"use strict";function t(t,n,e,o,r,i){function a(){n(function(){u.classAnimation="rubberBand"},4e3)}function s(){e.info("someone dead"),u.classAnimation=""}var u=this;u.devices={},u.LWT={};var c=function(n,e){var o=JSON.parse(e),r=o.info&&o.info.id,i=o.d&&o.d.id;o.status=u.LWT[i||r],o.online="DEAD"!==o.status,u.devices[i||r]=o,delete u.devices.undefined,t.$apply()};o.on("message",c),r.on("message",c),i.on("message",function(n,e){var o=n.split("/"),r=e.split("|"),i=r[0],a=r[1],s=o[1];s&&s===i&&(i="online"),u.LWT[s||a]=i,t.$apply()}),i.connect().then(i.subscribe("esp8266/+/online")),o.connect().then(o.subscribe("esp8266/+/status")),r.connect().then(r.subscribe("esp8266/+/status")),u.classAnimation="",u.showToastr=s,a()}var n={host:"rabbit.cmmc.ninja",port:8e3};angular.module("gulpAngularMqttWs").factory("myMqtt",["mqttwsProvider",function(t){var e=t(n);return e}]).factory("mqttLWT",["mqttwsProvider",function(t){var e=t(n);return e}]).factory("mqttXYZ",["mqttwsProvider",function(t){n.host="cmmc.xyz",n.port=9001;var e=t(n);return e}]).controller("MainController",t),t.$inject=["$scope","$timeout","toastr","myMqtt","mqttXYZ","mqttLWT"]}(),function(){"use strict";function t(t){t.debug("runBlock end")}angular.module("gulpAngularMqttWs").run(t),t.$inject=["$log"]}(),function(){"use strict";function t(t,n){t.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}),n.otherwise("/")}angular.module("gulpAngularMqttWs").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("gulpAngularMqttWs").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function t(t,n){t.debugEnabled(!0),n.options.timeOut=3e3,n.options.positionClass="toast-top-right",n.options.preventDuplicates=!0,n.options.progressBar=!0}angular.module("gulpAngularMqttWs").config(t),t.$inject=["$logProvider","toastr"]}(),angular.module("gulpAngularMqttWs").run(["$templateCache",function(t){t.put("app/main/main.html",'<div layout="vertical" layout-fill=""><md-content><header><acme-navbar creationdate="main.creationDate"></acme-navbar></header><section class="jumbotron"><div class="techs" layout-align="center"><md-card ng-repeat="device in main.devices | orderBy:\'device.d.myName\'"><div class="thumbnail"><div class="caption"><h3>{{ device.d.myName }} - {{ device.status }}</h3><p>{{ device.info.id || device.d.id }}</p><p>{{ device.d.seconds }} ({{ device.d.subscription }})</p><p>{{ device.info.sensor || device.d.sensor || "?" }}</p><p ng-show="{{device.online}}">esp8266/{{ device.info.id || device.d.id }}/status</p><p><a ng-href="{{ device.url }}">{{ device.url }}</a></p></div></div></md-card></div></section></md-content></div>'),t.put("app/components/navbar/navbar.html",'<md-toolbar layout="row" layout-align="center center"><md-button href="https://github.com/Swiip/generator-gulp-angular">CMMC Devices</md-button><section flex="" layout="row" layout-align="left center"><md-button href="#" class="md-raised">Home</md-button><md-button href="#" class="md-raised">About</md-button><md-button href="#" class="md-raised">Contact</md-button></section></md-toolbar>')}]);